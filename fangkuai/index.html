<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="fangkuai, Java"><meta name="description" content="Java技术分享"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>fangkuai | GreetingPine</title><link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/GreetingPineFavicon.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/css/matery.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/css/my.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/css/loading.css"><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="GreetingPine" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>$(document).ready(function(){document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")})</script><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><div><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/medias/GreetingPineLogo.png" class="logo-img" alt="LOGO"> <span class="logo-span">GreetingPine</span></div></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/navigate" class="waves-effect waves-light"><i class="fa fa-archive" style="zoom:.6"></i> <span>百宝箱</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fa fa-coffee" style="zoom:.6"></i> <span>放松</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/relax/music"><i class="fa fa-music" style="margin-top:-20px;zoom:.6"></i> <span>音乐</span></a></li><li><a href="/relax/film"><i class="fas fa-film" style="margin-top:-20px;zoom:.6"></i> <span>影视</span></a></li><li><a href="/relax/photos"><i class="fa fa-camera" style="margin-top:-20px;zoom:.6"></i> <span>美图</span></a></li><li><a href="/relax/game"><i class="fa fa-gamepad" style="margin-top:-20px;zoom:.6"></i> <span>游戏</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/medias/GreetingPineLogo.png" class="logo-img circle responsive-img"><div class="logo-name">GreetingPine</div><div class="logo-desc">Java技术分享</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/navigate" class="waves-effect waves-light"><i class="fa-fw fa fa-archive"></i> 百宝箱</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fa fa-coffee"></i> 放松 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/relax/music" style="margin-left:75px"><i class="fa fa fa-music" style="position:absolute;left:50px"></i> <span>音乐</span></a></li><li><a href="/relax/film" style="margin-left:75px"><i class="fa fas fa-film" style="position:absolute;left:50px"></i> <span>影视</span></a></li><li><a href="/relax/photos" style="margin-left:75px"><i class="fa fa fa-camera" style="position:absolute;left:50px"></i> <span>美图</span></a></li><li><a href="/relax/game" style="margin-left:75px"><i class="fa fa fa-gamepad" style="position:absolute;left:50px"></i> <span>游戏</span></a></li></ul></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li></ul></div></div></nav></header><script src="/fangkuai/static/js/jquery-1.10.2.js"></script><style>body{margin:0;background-color:#000;background-image:radial-gradient(ellipse at top,#335476 0,#31506e 11.1%,#304b67 22.2%,#2f4760 33.3%,#2d4359 44.4%,#2c3f51 55.6%,#2a3a4a 66.7%,#293643 77.8%,#28323d 88.9%,#262e36 100%);height:100vh;overflow:hidden;font-family:monospace;font-weight:700;letter-spacing:.06em;color:rgba(255,255,255,.75)}#c{display:block;touch-action:none;transform:translateZ(0)}.hud__score,.pause-btn{position:fixed;font-size:calc(14px + 2vw + 1vh)}.hud__score{top:.65em;left:.65em;pointer-events:none;user-select:none}.cube-count-lbl{font-size:.46em}.pause-btn{position:fixed;top:0;right:0;padding:.8em .65em}.pause-btn>div{position:relative;width:.8em;height:.8em;opacity:.75}.pause-btn>div::after,.pause-btn>div::before{content:'';display:block;width:34%;height:100%;position:absolute;background-color:#fff}.pause-btn>div::after{right:0}.slowmo{position:fixed;bottom:0;width:100%;pointer-events:none;opacity:0;transition:opacity .4s;will-change:opacity}.slowmo::before{content:'SLOW-MO';display:block;font-size:calc(8px + 1vw + .5vh);margin-left:.5em;margin-bottom:8px}.slowmo::after{content:'';display:block;position:fixed;bottom:0;width:100%;height:1.5vh;background-color:rgba(0,0,0,.25);z-index:-1}.slowmo__bar{height:1.5vh;background-color:rgba(255,255,255,.75);transform-origin:0 0}.menus::before{content:'';pointer-events:none;position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000;opacity:0;transition:opacity .2s;transition-timing-function:ease-in}.menus.has-active::before{opacity:.08;transition-duration:.4s;transition-timing-function:ease-out}.menus.interactive-mode::before{opacity:.02}.menu{pointer-events:none;position:fixed;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;user-select:none;text-align:center;color:rgba(255,255,255,.9);opacity:0;visibility:hidden;transform:translateY(30px);transition-property:opacity,visibility,transform;transition-duration:.2s;transition-timing-function:ease-in}.menu.active{opacity:1;visibility:visible;transform:translateY(0);transition-duration:.4s;transition-timing-function:ease-out}.menus.interactive-mode .menu.active{opacity:.6}.menus:not(.interactive-mode) .menu.active>*{pointer-events:auto}h1{font-size:4rem;line-height:.95;text-align:center;font-weight:700;margin:0 .65em 1em}h2{font-size:1.2rem;line-height:1;text-align:center;font-weight:700;margin:-1em .65em 1em}.final-score-lbl{font-size:5rem;margin:-.2em 0 0}.high-score-lbl{font-size:1.2rem;margin:0 0 2.5em}button{display:block;position:relative;width:200px;padding:12px 20px;background:0 0;border:none;outline:0;user-select:none;font-family:monospace;font-weight:700;font-size:1.4rem;color:#fff;opacity:.75;transition:opacity .3s}button::before{content:'';position:absolute;top:0;right:0;bottom:0;left:0;background-color:rgba(255,255,255,.15);transform:scale(0,0);opacity:0;transition:opacity .3s,transform .3s}button:active{opacity:1}button:active::before{transform:scale(1,1);opacity:1}.credits{position:fixed;width:100%;left:0;bottom:20px}a{color:#fff}@media (min-width:1025px){button:hover{opacity:1}button:hover::before{transform:scale(1,1);opacity:1}}</style><canvas id="c"></canvas><div class="hud"><div class="hud__score"><div class="score-lbl"></div><div class="cube-count-lbl"></div></div><div class="pause-btn"><div></div></div><div class="slowmo"><div class="slowmo__bar"></div></div></div><div class="menus"><div class="menu menu--main"><h1>MENJA</h1><button type="button" class="play-normal-btn">PLAY GAME</button> <button type="button" class="play-casual-btn">CASUAL MODE</button><div class="credits">An 8kB game by <a href="javascript:;">Caleb Miller</a></div></div><div class="menu menu--pause"><h1>Paused</h1><button type="button" class="resume-btn">RESUME GAME</button> <button type="button" class="menu-btn--pause">MAIN MENU</button></div><div class="menu menu--score"><h1>Game Over</h1><h2>Your Score:</h2><div class="final-score-lbl"></div><div class="high-score-lbl"></div><button type="button" class="play-again-btn">PLAY AGAIN</button> <button type="button" class="menu-btn--score">MAIN MENU</button></div></div><script>let gameSpeed=1;const BLUE={r:103,g:215,b:240},GREEN={r:166,g:224,b:44},PINK={r:250,g:36,b:115},ORANGE={r:254,g:149,b:34},allColors=[BLUE,GREEN,PINK,ORANGE],getSpawnDelay=()=>{var e=1400-3.1*state.game.cubeCount;return Math.max(e,550)},doubleStrongEnableScore=2e3,slowmoThreshold=10,strongThreshold=25,spinnerThreshold=25;let pointerIsDown=!1,pointerScreen={x:0,y:0},pointerScene={x:0,y:0};const minPointerSpeed=60,hitDampening=.1,backboardZ=-400,shadowColor="#262e36",airDrag=.022,gravity=.3,sparkColor="rgba(170,221,255,.9)",sparkThickness=2.2,airDragSpark=.1,touchTrailColor="rgba(170,221,255,.62)",touchTrailThickness=7,touchPointLife=120,touchPoints=[],targetRadius=40,targetHitRadius=50,makeTargetGlueColor=e=>"rgb(170,221,255)",fragRadius=targetRadius/3,canvas=document.querySelector("#c"),cameraDistance=900,sceneScale=1,cameraFadeStartZ=.45*cameraDistance,cameraFadeEndZ=.65*cameraDistance,cameraFadeRange=cameraFadeEndZ-cameraFadeStartZ,allVertices=[],allPolys=[],allShadowVertices=[],allShadowPolys=[],GAME_MODE_RANKED=Symbol("GAME_MODE_RANKED"),GAME_MODE_CASUAL=Symbol("GAME_MODE_CASUAL"),MENU_MAIN=Symbol("MENU_MAIN"),MENU_PAUSE=Symbol("MENU_PAUSE"),MENU_SCORE=Symbol("MENU_SCORE"),state={game:{mode:GAME_MODE_RANKED,time:0,score:0,cubeCount:0},menus:{active:MENU_MAIN}},isInGame=()=>!state.menus.active,isMenuVisible=()=>!!state.menus.active,isCasualGame=()=>state.game.mode===GAME_MODE_CASUAL,isPaused=()=>state.menus.active===MENU_PAUSE,highScoreKey="__menja__highScore",getHighScore=()=>{var e=localStorage.getItem(highScoreKey);return e?parseInt(e,10):0};let _lastHighscore=getHighScore();const setHighScore=e=>{_lastHighscore=getHighScore(),localStorage.setItem(highScoreKey,String(e))},isNewHighScore=()=>state.game.score>_lastHighscore,invariant=(e,t)=>{if(!e)throw new Error(t)},$=e=>document.querySelector(e),handleClick=(e,t)=>e.addEventListener("click",t),handlePointerDown=(e,t)=>{e.addEventListener("touchstart",t),e.addEventListener("mousedown",t)},formatNumber=e=>e.toLocaleString(),PI=Math.PI,TAU=2*Math.PI,ETA=.5*Math.PI,clamp=(e,t,a)=>Math.min(Math.max(e,t),a),lerp=(e,t,a)=>(t-e)*a+e,random=(e,t)=>Math.random()*(t-e)+e,randomInt=(e,t)=>(Math.random()*(t-e+1)|0)+e,pickOne=e=>e[Math.random()*e.length|0],colorToHex=e=>"#"+(0|e.r).toString(16).padStart(2,"0")+(0|e.g).toString(16).padStart(2,"0")+(0|e.b).toString(16).padStart(2,"0"),shadeColor=(e,t)=>{let a,r;return r=t<.5?(a=0,1-2*t):(a=255,2*t-1),"#"+(0|lerp(e.r,a,r)).toString(16).padStart(2,"0")+(0|lerp(e.g,a,r)).toString(16).padStart(2,"0")+(0|lerp(e.b,a,r)).toString(16).padStart(2,"0")},_allCooldowns=[],makeCooldown=(t,a=1)=>{let r=0,o=0;const e={rechargeTime:t,units:a},n=()=>{var e;return((e=state.game.time)<o||(r-=e-o)<0)&&(r=0),o=e,r<=t*(a-1)};var s={canUse:n,useIfAble(){var e=n();return e&&(r+=t),e},mutate(e){e.rechargeTime&&((r-=t-e.rechargeTime)<0&&(r=0),t=e.rechargeTime),e.units&&(a=e.units)},reset(){r=0,o=0,this.mutate(e)}};return _allCooldowns.push(s),s},resetAllCooldowns=()=>_allCooldowns.forEach(e=>e.reset()),makeSpawner=({chance:t,cooldownPerSpawn:e,maxSpawns:a})=>{const r=makeCooldown(e,a);return{shouldSpawn(){return Math.random()<=t&&r.useIfAble()},mutate(e){e.chance&&(t=e.chance),r.mutate({rechargeTime:e.cooldownPerSpawn,units:e.maxSpawns})}}},normalize=e=>{var t=Math.hypot(e.x,e.y,e.z);return{x:e.x/t,y:e.y/t,z:e.z/t}},add=t=>e=>t+e,scaleVector=t=>e=>{e.x*=t,e.y*=t,e.z*=t};function cloneVertices(e){return e.map(e=>({x:e.x,y:e.y,z:e.z}))}function copyVerticesTo(t,a){var r=t.length;for(let e=0;e<r;e++){var o=t[e];const n=a[e];n.x=o.x,n.y=o.y,n.z=o.z}}function computeTriMiddle(e){var t=e.vertices;e.middle.x=(t[0].x+t[1].x+t[2].x)/3,e.middle.y=(t[0].y+t[1].y+t[2].y)/3,e.middle.z=(t[0].z+t[1].z+t[2].z)/3}function computeQuadMiddle(e){var t=e.vertices;e.middle.x=(t[0].x+t[1].x+t[2].x+t[3].x)/4,e.middle.y=(t[0].y+t[1].y+t[2].y+t[3].y)/4,e.middle.z=(t[0].z+t[1].z+t[2].z+t[3].z)/4}function computePolyMiddle(e){(3===e.vertices.length?computeTriMiddle:computeQuadMiddle)(e)}function computePolyDepth(e){computePolyMiddle(e);var t=e.middle.x,a=e.middle.y,r=e.middle.z-cameraDistance;e.depth=Math.hypot(t,a,r)}function computePolyNormal(e,t){var a=e.vertices[0],r=e.vertices[1],o=e.vertices[2],n=a.x-r.x,s=a.y-r.y,r=a.z-r.z,i=a.x-o.x,l=a.y-o.y,a=a.z-o.z,o=s*a-r*l,r=r*i-n*a,a=n*l-s*i,n=Math.hypot(o,r,a);const c=e[t];c.x=o/n,c.y=r/n,c.z=a/n}function transformVertices(e,n,s,i,l,t,a,r,c,d,h){const m=Math.sin(t),u=Math.cos(t),p=Math.sin(a),y=Math.cos(a),g=Math.sin(r),x=Math.cos(r);e.forEach((e,t)=>{const a=n[t];var t=e.x,r=e.z*m+e.y*u,e=e.z*u-e.y*m,o=t*y-e*p,t=t*p+e*y,e=o*x-r*g,o=o*g+r*x,r=t;a.x=e*c+s,a.y=o*d+i,a.z=r*h+l})}const projectVertex=e=>{var t=cameraDistance*sceneScale/(cameraDistance-e.z);e.x=e.x*t,e.y=e.y*t},projectVertexTo=(e,t)=>{var a=cameraDistance*sceneScale/(cameraDistance-e.z);t.x=e.x*a,t.y=e.y*a},PERF_START=()=>{},PERF_END=()=>{},PERF_UPDATE=()=>{};function makeCubeModel({scale:e=1}){return{vertices:[{x:-e,y:-e,z:e},{x:e,y:-e,z:e},{x:e,y:e,z:e},{x:-e,y:e,z:e},{x:-e,y:-e,z:-e},{x:e,y:-e,z:-e},{x:e,y:e,z:-e},{x:-e,y:e,z:-e}],polys:[{vIndexes:[0,1,2,3]},{vIndexes:[7,6,5,4]},{vIndexes:[3,2,6,7]},{vIndexes:[4,5,1,0]},{vIndexes:[5,6,2,1]},{vIndexes:[0,3,7,4]}]}}function makeRecursiveCubeModel({recursionLevel:t,splitFn:a,scale:r=1}){var o=e=>1/3**e;let n=[{x:0,y:0,z:0}];for(let e=1;e<=t;e++){const r=2*o(e),l=[];n.forEach(e=>{l.push(...a(e,r))}),n=l}const e={vertices:[],polys:[]},s=makeCubeModel({scale:1}),i=(s.vertices.forEach(scaleVector(o(t))),o(t)*(3**t-1));return n.forEach((t,a)=>{Math.max(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z)),i;e.vertices.push(...s.vertices.map(e=>({x:(e.x+t.x)*r,y:(e.y+t.y)*r,z:(e.z+t.z)*r}))),e.polys.push(...s.polys.map(e=>({vIndexes:e.vIndexes.map(add(8*a))})))}),e}function mengerSpongeSplit(e,t){return[{x:e.x+t,y:e.y-t,z:e.z+t},{x:e.x+t,y:e.y-t,z:e.z+0},{x:e.x+t,y:e.y-t,z:e.z-t},{x:e.x+0,y:e.y-t,z:e.z+t},{x:e.x+0,y:e.y-t,z:e.z-t},{x:e.x-t,y:e.y-t,z:e.z+t},{x:e.x-t,y:e.y-t,z:e.z+0},{x:e.x-t,y:e.y-t,z:e.z-t},{x:e.x+t,y:e.y+t,z:e.z+t},{x:e.x+t,y:e.y+t,z:e.z+0},{x:e.x+t,y:e.y+t,z:e.z-t},{x:e.x+0,y:e.y+t,z:e.z+t},{x:e.x+0,y:e.y+t,z:e.z-t},{x:e.x-t,y:e.y+t,z:e.z+t},{x:e.x-t,y:e.y+t,z:e.z+0},{x:e.x-t,y:e.y+t,z:e.z-t},{x:e.x+t,y:e.y+0,z:e.z+t},{x:e.x+t,y:e.y+0,z:e.z-t},{x:e.x-t,y:e.y+0,z:e.z+t},{x:e.x-t,y:e.y+0,z:e.z-t}]}function optimizeModel(e,a=1e-4){const{vertices:r,polys:s}=e;var o,n;r.forEach((e,t)=>{e.originalIndexes=[t]});for(let t=r.length-1;0<=t;t--)for(let e=t-1;0<=e;e--){var i=r[t];const d=r[e];if(o=i,n=d,Math.abs(o.x-n.x)<a&&Math.abs(o.y-n.y)<a&&Math.abs(o.z-n.z)<a){r.splice(t,1),d.originalIndexes.push(...i.originalIndexes);break}}r.forEach((o,n)=>{s.forEach(e=>{e.vIndexes.forEach((e,t,a)=>{const r=o.originalIndexes;r.includes(e)&&(a[t]=n)})})}),s.forEach(e=>{var t=e.vIndexes;e.sum=t[0]+t[1]+t[2]+t[3]}),s.sort((e,t)=>t.sum-e.sum);for(let t=s.length-1;0<=t;t--)for(let e=t-1;0<=e;e--){var l=s[t],c=s[e];if(l.sum!==c.sum)break;if(((e,t)=>{e=e.vIndexes,t=t.vIndexes;return!(e[0]!==t[0]&&e[0]!==t[1]&&e[0]!==t[2]&&e[0]!==t[3]||e[1]!==t[0]&&e[1]!==t[1]&&e[1]!==t[2]&&e[1]!==t[3]||e[2]!==t[0]&&e[2]!==t[1]&&e[2]!==t[2]&&e[2]!==t[3]||e[3]!==t[0]&&e[3]!==t[1]&&e[3]!==t[2]&&e[3]!==t[3])})(l,c)){s.splice(t,1),s.splice(e,1),t--;break}}return e}class Entity{constructor({model:e,color:t,wireframe:a=!1}){const r=cloneVertices(e.vertices),o=cloneVertices(e.vertices),n=colorToHex(t),s=shadeColor(t,.4);var i=e.polys.map(e=>({vertices:e.vIndexes.map(e=>r[e]),color:t,wireframe:a,strokeWidth:a?2:0,strokeColor:n,strokeColorDark:s,depth:0,middle:{x:0,y:0,z:0},normalWorld:{x:0,y:0,z:0},normalCamera:{x:0,y:0,z:0}})),l=e.polys.map(e=>({vertices:e.vIndexes.map(e=>o[e]),wireframe:a,normalWorld:{x:0,y:0,z:0}}));this.projected={},this.model=e,this.vertices=r,this.polys=i,this.shadowVertices=o,this.shadowPolys=l,this.reset()}reset(){this.x=0,this.y=0,this.z=0,this.xD=0,this.yD=0,this.zD=0,this.rotateX=0,this.rotateY=0,this.rotateZ=0,this.rotateXD=0,this.rotateYD=0,this.rotateZD=0,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.projected.x=0,this.projected.y=0}transform(){transformVertices(this.model.vertices,this.vertices,this.x,this.y,this.z,this.rotateX,this.rotateY,this.rotateZ,this.scaleX,this.scaleY,this.scaleZ),copyVerticesTo(this.vertices,this.shadowVertices)}project(){projectVertexTo(this,this.projected)}}const targets=[],targetPool=new Map(allColors.map(e=>[e,[]])),targetWireframePool=new Map(allColors.map(e=>[e,[]])),getTarget=(()=>{const i=makeSpawner({chance:.5,cooldownPerSpawn:1e4,maxSpawns:1});let l=!1;const c=makeSpawner({chance:.3,cooldownPerSpawn:12e3,maxSpawns:1}),d=makeSpawner({chance:.1,cooldownPerSpawn:1e4,maxSpawns:1}),h=[["x","y"],["y","z"],["z","x"]];return function(){l&&state.game.score<=doubleStrongEnableScore?l=!1:!l&&state.game.score>doubleStrongEnableScore&&(l=!0,c.mutate({maxSpawns:2}));let e=pickOne([BLUE,GREEN,ORANGE]),t=!1,a=1;var r=state.game.cubeCount>=spinnerThreshold&&isInGame()&&d.shouldSpawn();state.game.cubeCount>=slowmoThreshold&&i.shouldSpawn()?(e=BLUE,t=!0):state.game.cubeCount>=strongThreshold&&c.shouldSpawn()&&(e=PINK,a=3);const o=function(e,t){const a=t?targetWireframePool:targetPool;let r=a.get(e).pop();return r||((r=new Entity({model:optimizeModel(makeRecursiveCubeModel({recursionLevel:1,splitFn:mengerSpongeSplit,scale:targetRadius})),color:e,wireframe:t})).color=e,r.wireframe=t,r.hit=!1,r.maxHealth=0,r.health=0),r}(e,t),n=(o.hit=!1,o.maxHealth=3,o.health=a,updateTargetHealth(o,0),[.1*Math.random()-.05,.1*Math.random()-.05]),s=(r&&(n[0]=-.25,n[1]=0,o.rotateZ=random(0,TAU)),pickOne(h));return n.forEach((e,t)=>{switch(s[t]){case"x":o.rotateXD=e;break;case"y":o.rotateYD=e;break;case"z":o.rotateZD=e}}),o}})(),updateTargetHealth=(e,t)=>{if(e.health+=t,!e.wireframe){var a,r=e.health-1,o=makeTargetGlueColor(e);for(a of e.polys)a.strokeWidth=r,a.strokeColor=o}},returnTarget=e=>{e.reset();const t=e.wireframe?targetWireframePool:targetPool;t.get(e.color).push(e)};function resetAllTargets(){for(;targets.length;)returnTarget(targets.pop())}const frags=[],fragPool=new Map(allColors.map(e=>[e,[]])),fragWireframePool=new Map(allColors.map(e=>[e,[]])),createBurst=(()=>{const e=mengerSpongeSplit({x:0,y:0,z:0},2*fragRadius),h=cloneVertices(e),m=cloneVertices(e),u=cloneVertices(e),p=e.map(normalize),y=cloneVertices(p),g=e.length;return(t,a=1)=>{transformVertices(e,h,t.x,t.y,t.z,t.rotateX,t.rotateY,t.rotateZ,1,1,1),transformVertices(e,m,t.x-t.xD,t.y-t.yD,t.z-t.zD,t.rotateX-t.rotateXD,t.rotateY-t.rotateYD,t.rotateZ-t.rotateZD,1,1,1);for(let e=0;e<g;e++){var r=h[e],o=m[e];const c=u[e];c.x=r.x-o.x,c.y=r.y-o.y,c.z=r.z-o.z}transformVertices(p,y,0,0,0,t.rotateX,t.rotateY,t.rotateZ,1,1,1);for(let e=0;e<g;e++){var n=h[e],s=u[e],i=y[e];const d=function(e){const t=e.wireframe?fragWireframePool:fragPool;let a=t.get(e.color).pop();return a||((a=new Entity({model:makeCubeModel({scale:fragRadius}),color:e.color,wireframe:e.wireframe})).color=e.color,a.wireframe=e.wireframe),a}(t);d.x=n.x,d.y=n.y,d.z=n.z,d.rotateX=t.rotateX,d.rotateY=t.rotateY,d.rotateZ=t.rotateZ;var n=2*a,l=2*a;d.xD=s.x+i.x*n+Math.random()*l,d.yD=s.y+i.y*n+Math.random()*l,d.zD=s.z+i.z*n+Math.random()*l,d.rotateXD=.015*d.xD,d.rotateYD=.015*d.yD,d.rotateZD=.015*d.zD,frags.push(d)}}})(),returnFrag=e=>{e.reset();const t=e.wireframe?fragWireframePool:fragPool;t.get(e.color).push(e)},sparks=[],sparkPool=[];function addSpark(e,t,a,r){const o=sparkPool.pop()||{};return o.x=e+.5*a,o.y=t+.5*r,o.xD=a,o.yD=r,o.life=random(200,300),o.maxLife=o.life,sparks.push(o),o}function sparkBurst(t,a,r,o){var n=TAU/r;for(let e=0;e<r;e++){var s=e*n+n*Math.random(),i=(1-Math.random()**3)*o;addSpark(t,a,Math.sin(s)*i,Math.cos(s)*i)}}let glueShedVertices;function glueShedSparks(e){glueShedVertices?copyVerticesTo(e.vertices,glueShedVertices):glueShedVertices=cloneVertices(e.vertices),glueShedVertices.forEach(e=>{Math.random()<.4&&(projectVertex(e),addSpark(e.x,e.y,random(-12,12),random(-12,12)))})}function returnSpark(e){sparkPool.push(e)}const hudContainerNode=$(".hud");function setHudVisibility(e){hudContainerNode.style.display=e?"block":"none"}const scoreNode=$(".score-lbl"),cubeCountNode=$(".cube-count-lbl");function renderScoreHud(){isCasualGame()?(scoreNode.style.display="none",cubeCountNode.style.opacity=1):(scoreNode.innerText="SCORE: "+state.game.score,scoreNode.style.display="block",cubeCountNode.style.opacity=.65),cubeCountNode.innerText="CUBES SMASHED: "+state.game.cubeCount}renderScoreHud(),handlePointerDown($(".pause-btn"),()=>pauseGame());const slowmoNode=$(".slowmo"),slowmoBarNode=$(".slowmo__bar");function renderSlowmoStatus(e){slowmoNode.style.opacity=0===e?0:1,slowmoBarNode.style.transform=`scaleX(${e.toFixed(3)})`}const menuContainerNode=$(".menus"),menuMainNode=$(".menu--main"),menuPauseNode=$(".menu--pause"),menuScoreNode=$(".menu--score"),finalScoreLblNode=$(".final-score-lbl"),highScoreLblNode=$(".high-score-lbl");function showMenu(e){e.classList.add("active")}function hideMenu(e){e.classList.remove("active")}function renderMenus(){switch(hideMenu(menuMainNode),hideMenu(menuPauseNode),hideMenu(menuScoreNode),state.menus.active){case MENU_MAIN:showMenu(menuMainNode);break;case MENU_PAUSE:showMenu(menuPauseNode);break;case MENU_SCORE:finalScoreLblNode.textContent=formatNumber(state.game.score),isNewHighScore()?highScoreLblNode.textContent="New High Score!":highScoreLblNode.textContent="High Score: "+formatNumber(getHighScore()),showMenu(menuScoreNode)}setHudVisibility(!isMenuVisible()),menuContainerNode.classList.toggle("has-active",isMenuVisible()),menuContainerNode.classList.toggle("interactive-mode",isMenuVisible()&&pointerIsDown)}function setActiveMenu(e){state.menus.active=e,renderMenus()}function setScore(e){state.game.score=e,renderScoreHud()}function incrementScore(e){isInGame()&&(state.game.score+=e,state.game.score<0&&(state.game.score=0),renderScoreHud())}function setCubeCount(e){state.game.cubeCount=e,renderScoreHud()}function incrementCubeCount(e){isInGame()&&(state.game.cubeCount+=e,renderScoreHud())}function setGameMode(e){state.game.mode=e}function resetGame(){resetAllTargets(),state.game.time=0,resetAllCooldowns(),setScore(0),setCubeCount(0),spawnTime=getSpawnDelay()}function pauseGame(){isInGame()&&setActiveMenu(MENU_PAUSE)}function resumeGame(){isPaused()&&setActiveMenu(null)}function endGame(){handleCanvasPointerUp(),isNewHighScore()&&setHighScore(state.game.score),setActiveMenu(MENU_SCORE)}renderMenus(),handleClick($(".play-normal-btn"),()=>{setGameMode(GAME_MODE_RANKED),setActiveMenu(null),resetGame()}),handleClick($(".play-casual-btn"),()=>{setGameMode(GAME_MODE_CASUAL),setActiveMenu(null),resetGame()}),handleClick($(".resume-btn"),()=>resumeGame()),handleClick($(".menu-btn--pause"),()=>setActiveMenu(MENU_MAIN)),handleClick($(".play-again-btn"),()=>{setActiveMenu(null),resetGame()}),handleClick($(".menu-btn--score"),()=>setActiveMenu(MENU_MAIN)),handleClick($(".play-normal-btn"),()=>{setGameMode(GAME_MODE_RANKED),setActiveMenu(null),resetGame()}),handleClick($(".play-casual-btn"),()=>{setGameMode(GAME_MODE_CASUAL),setActiveMenu(null),resetGame()}),handleClick($(".resume-btn"),()=>resumeGame()),handleClick($(".menu-btn--pause"),()=>setActiveMenu(MENU_MAIN)),handleClick($(".play-again-btn"),()=>{setActiveMenu(null),resetGame()}),handleClick($(".menu-btn--score"),()=>setActiveMenu(MENU_MAIN)),window.addEventListener("keydown",e=>{"p"===e.key&&(isPaused()?resumeGame:pauseGame)()});let spawnTime=0;const maxSpawnX=450,pointerDelta={x:0,y:0},pointerDeltaScaled={x:0,y:0},slowmoDuration=1500;let slowmoRemaining=0,spawnExtra=0;const spawnExtraDelay=300;let targetSpeed=1;function tick(e,t,a,r,o){PERF_START("frame"),PERF_START("tick"),state.game.time+=a,targetSpeed=0<slowmoRemaining?((slowmoRemaining-=a)<0&&(slowmoRemaining=0),pointerIsDown?.075:.3):isMenuVisible()&&pointerIsDown?.025:1,renderSlowmoStatus(slowmoRemaining/slowmoDuration),gameSpeed+=(targetSpeed-gameSpeed)/22*o,gameSpeed=clamp(gameSpeed,0,1);var o=e/2,n=t/2,s=1-airDrag*r,i=1-airDragSpark*r,l=1/(.75*r+.25),t=(pointerDelta.x=0,pointerDelta.y=0,pointerDeltaScaled.x=0,pointerDeltaScaled.y=0,touchPoints[touchPoints.length-1]),c=(pointerIsDown&&t&&!t.touchBreak&&(pointerDelta.x=pointerScene.x-t.x,pointerDelta.y=pointerScene.y-t.y,pointerDeltaScaled.x=pointerDelta.x*l,pointerDeltaScaled.y=pointerDelta.y*l),Math.hypot(pointerDelta.x,pointerDelta.y)),d=c*l;for(touchPoints.forEach(e=>e.life-=a),pointerIsDown&&touchPoints.push({x:pointerScene.x,y:pointerScene.y,life:touchPointLife});touchPoints[0]&&touchPoints[0].life<=0;)touchPoints.shift();if(PERF_START("entities"),(spawnTime-=a)<=0){spawnTime=0<spawnExtra?(spawnExtra--,spawnExtraDelay):getSpawnDelay();const M=getTarget();t=Math.min(.8*o,maxSpawnX);M.x=Math.random()*t*2-t,M.y=n+2*targetHitRadius,M.z=Math.random()*targetRadius*2-targetRadius,M.xD=Math.random()*(-2*M.x/120),M.yD=-20,targets.push(M)}var h=-o+targetRadius,m=o-targetRadius,u=-n-120;e:for(let t=targets.length-1;0<=t;t--){const P=targets[t];if(P.x+=P.xD*r,P.y+=P.yD*r,P.y<u&&(P.y=u,P.yD=0),P.x<h?(P.x=h,P.xD*=-.4):P.x>m&&(P.x=m,P.xD*=-.4),P.z<backboardZ&&(P.z=backboardZ,P.zD*=-.4),P.yD+=gravity*r,P.rotateX+=P.rotateXD*r,P.rotateY+=P.rotateYD*r,P.rotateZ+=P.rotateZD*r,P.transform(),P.project(),P.y>n+2*targetHitRadius)targets.splice(t,1),returnTarget(P),isInGame()&&(isCasualGame()?incrementScore(-25):endGame());else{var p=Math.ceil(c/targetRadius*2);for(let e=1;e<=p;e++){var y,g=1-e/p,x=pointerScene.x-pointerDelta.x*g,g=pointerScene.y-pointerDelta.y*g;if(Math.hypot(x-P.projected.x,g-P.projected.y)<=targetHitRadius){P.hit||(P.hit=!0,P.xD+=pointerDeltaScaled.x*hitDampening,P.yD+=pointerDeltaScaled.y*hitDampening,P.rotateXD+=.001*pointerDeltaScaled.y,P.rotateYD+=.001*pointerDeltaScaled.x,y=7+.125*d,d>minPointerSpeed?(P.health--,incrementScore(10),P.health<=0?(incrementCubeCount(1),createBurst(P,l),sparkBurst(x,g,8,y),P.wireframe&&(slowmoRemaining=slowmoDuration,spawnTime=0,spawnExtra=2),targets.splice(t,1),returnTarget(P)):(sparkBurst(x,g,8,y),glueShedSparks(P),updateTargetHealth(P,0))):(incrementScore(5),sparkBurst(x,g,3,y)));continue e}}P.hit=!1}}var S=backboardZ+fragRadius,f=-e,w=e;for(let e=frags.length-1;0<=e;e--){const z=frags[e];z.x+=z.xD*r,z.y+=z.yD*r,z.z+=z.zD*r,z.xD*=s,z.yD*=s,z.zD*=s,z.y<u&&(z.y=u,z.yD=0),z.z<S&&(z.z=S,z.zD*=-.4),z.yD+=gravity*r,z.rotateX+=z.rotateXD*r,z.rotateY+=z.rotateYD*r,z.rotateZ+=z.rotateZD*r,z.transform(),z.project(),(z.projected.y>n+targetHitRadius||z.projected.x<f||z.projected.x>w||z.z>cameraFadeEndZ)&&(frags.splice(e,1),returnFrag(z))}for(let e=sparks.length-1;0<=e;e--){const b=sparks[e];b.life-=a,b.life<=0?(sparks.splice(e,1),returnSpark(b)):(b.x+=b.xD*r,b.y+=b.yD*r,b.xD*=i,b.yD*=i,b.yD+=gravity*r)}PERF_END("entities"),PERF_START("3D"),allVertices.length=0,allPolys.length=0,allShadowVertices.length=0,allShadowPolys.length=0,targets.forEach(e=>{allVertices.push(...e.vertices),allPolys.push(...e.polys),allShadowVertices.push(...e.shadowVertices),allShadowPolys.push(...e.shadowPolys)}),frags.forEach(e=>{allVertices.push(...e.vertices),allPolys.push(...e.polys),allShadowVertices.push(...e.shadowVertices),allShadowPolys.push(...e.shadowPolys)}),allPolys.forEach(e=>computePolyNormal(e,"normalWorld")),allPolys.forEach(computePolyDepth),allPolys.sort((e,t)=>t.depth-e.depth),allVertices.forEach(projectVertex),allPolys.forEach(e=>computePolyNormal(e,"normalCamera")),PERF_END("3D"),PERF_START("shadows"),transformVertices(allShadowVertices,allShadowVertices,0,0,0,TAU/8,0,0,1,1,1),allShadowPolys.forEach(e=>computePolyNormal(e,"normalWorld"));var v=Math.hypot(1,1),D=allShadowVertices.length;for(let e=0;e<D;e++){var E=allVertices[e].z-backboardZ;allShadowVertices[e].z-=v*E}transformVertices(allShadowVertices,allShadowVertices,0,0,0,-TAU/8,0,0,1,1,1),allShadowVertices.forEach(projectVertex),PERF_END("shadows"),PERF_END("tick")}function draw(l,e,t,a){PERF_START("draw");l.lineJoin="bevel",PERF_START("drawShadows"),l.fillStyle=shadowColor,l.strokeStyle=shadowColor,allShadowPolys.forEach(e=>{if(e.wireframe){l.lineWidth=2,l.beginPath();var t=e["vertices"],a=t.length,r=t[0];l.moveTo(r.x,r.y);for(let e=1;e<a;e++){var o=t[e];l.lineTo(o.x,o.y)}l.closePath(),l.stroke()}else{l.beginPath();var n=e["vertices"],s=n.length,r=n[0];l.moveTo(r.x,r.y);for(let e=1;e<s;e++){var i=n[e];l.lineTo(i.x,i.y)}l.closePath(),l.fill()}}),PERF_END("drawShadows"),PERF_START("drawPolys"),allPolys.forEach(e=>{if(e.wireframe||!(e.normalCamera.z<0)){0!==e.strokeWidth&&(l.lineWidth=e.normalCamera.z<0?.5*e.strokeWidth:e.strokeWidth,l.strokeStyle=e.normalCamera.z<0?e.strokeColorDark:e.strokeColor);var t,a,r=e["vertices"],o=r[r.length-1],n=e.middle.z>cameraFadeStartZ;e.wireframe||(t=0<(t=.5*e.normalWorld.y+-.5*e.normalWorld.z)?.1:(t**32-t)/2*.9+.1,l.fillStyle=shadeColor(e.color,t)),n&&(l.globalAlpha=Math.max(0,1-(e.middle.z-cameraFadeStartZ)/cameraFadeRange)),l.beginPath(),l.moveTo(o.x,o.y);for(a of r)l.lineTo(a.x,a.y);e.wireframe||l.fill(),0!==e.strokeWidth&&l.stroke(),n&&(l.globalAlpha=1)}}),PERF_END("drawPolys"),PERF_START("draw2D"),l.strokeStyle=sparkColor,l.lineWidth=sparkThickness,l.beginPath(),sparks.forEach(e=>{l.moveTo(e.x,e.y);var t=(e.life/e.maxLife)**.5*1.5;l.lineTo(e.x-e.xD*t,e.y-e.yD*t)}),l.stroke(),l.strokeStyle=touchTrailColor;var r=touchPoints.length;for(let e=1;e<r;e++){var o,n=touchPoints[e],s=touchPoints[e-1];n.touchBreak||s.touchBreak||(o=n.life/touchPointLife,l.lineWidth=o*touchTrailThickness,l.beginPath(),l.moveTo(s.x,s.y),l.lineTo(n.x,n.y),l.stroke())}PERF_END("draw2D"),PERF_END("draw"),PERF_END("frame"),PERF_UPDATE()}function setupCanvases(){const s=canvas.getContext("2d"),i=window.devicePixelRatio||1;let l,c,d;function e(){var e=window.innerWidth,t=window.innerHeight;l=t/1e3,c=e/l,d=t/l,canvas.width=e*i,canvas.height=t*i,canvas.style.width=e+"px",canvas.style.height=t+"px"}e(),window.addEventListener("resize",e);let h=0;function t(e){let t=e-h;var a,r,o,n;h=e,m(),isPaused()||(t<0?t=17:68<t&&(t=68),e=c/2,a=d/2,pointerScene.x=pointerScreen.x/l-e,pointerScene.y=pointerScreen.y/l-a,r=t/16.6667,n=gameSpeed*t,o=gameSpeed*r,tick(c,d,n,o,r),s.clearRect(0,0,canvas.width,canvas.height),n=i*l,s.scale(n,n),s.translate(e,a),draw(s,c,d,l),s.setTransform(1,0,0,1,0,0))}const m=()=>requestAnimationFrame(t);m()}function handleCanvasPointerDown(e,t){pointerIsDown||(pointerIsDown=!0,pointerScreen.x=e,pointerScreen.y=t,isMenuVisible()&&renderMenus())}function handleCanvasPointerUp(){pointerIsDown&&(pointerIsDown=!1,touchPoints.push({touchBreak:!0,life:touchPointLife}),isMenuVisible()&&renderMenus())}function handleCanvasPointerMove(e,t){pointerIsDown&&(pointerScreen.x=e,pointerScreen.y=t)}if("PointerEvent"in window)canvas.addEventListener("pointerdown",e=>{e.isPrimary&&handleCanvasPointerDown(e.clientX,e.clientY)}),canvas.addEventListener("pointerup",e=>{e.isPrimary&&handleCanvasPointerUp()}),canvas.addEventListener("pointermove",e=>{e.isPrimary&&handleCanvasPointerMove(e.clientX,e.clientY)}),document.body.addEventListener("mouseleave",handleCanvasPointerUp);else{let a=null;canvas.addEventListener("touchstart",e=>{pointerIsDown||(e=e.changedTouches[0],a=e.identifier,handleCanvasPointerDown(e.clientX,e.clientY))}),canvas.addEventListener("touchend",e=>{for(var t of e.changedTouches)if(t.identifier===a){handleCanvasPointerUp();break}}),canvas.addEventListener("touchmove",e=>{for(var t of e.changedTouches)if(t.identifier===a){handleCanvasPointerMove(t.clientX,t.clientY),e.preventDefault();break}},{passive:!1})}setupCanvases()</script><footer class="page-footer bg-color"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/aplayer/APlayer.min.css"><style>.aplayer .aplayer-lrc p{display:none;font-size:12px;font-weight:700;line-height:16px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{display:none;font-size:15px;color:#42b983}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><div><div class="row"><meting-js class="col l8 offset-l2 m10 offset-m1 s12" server="netease" type="playlist" id="7424495126" fixed="true" autoplay theme="#42b983" loop order="random" preload="auto" volume="0.7" list-folded="true"></meting-js></div></div><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/aplayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2022</span> <span id="year">2022</span> <a href="/about" target="_blank">zhiyuan</a> |&nbsp;<br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">5.1k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次 </span><span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><span id="sitetime">载入运行时间...</span><script>function siteTime(){var e=36e5,t=24*e,n=new Date,o="2022",r=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),l=n.getHours(),m=n.getMinutes(),n=n.getSeconds(),M=Date.UTC(o,"5","28","0","0","0"),a=Date.UTC(r,a,i,l,m,n)-M,i=Math.floor(a/31536e6),l=Math.floor(a/t-365*i),m=Math.floor((a-(365*i+l)*t)/e),n=Math.floor((a-(365*i+l)*t-m*e)/6e4),M=Math.floor((a-(365*i+l)*t-m*e-6e4*n)/1e3);o==r?(document.getElementById("year").innerHTML=r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+l+" 天 "+m+" 小时 "+n+" 分钟 "+M+" 秒"):(document.getElementById("year").innerHTML=o+" - "+r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+i+" 年 "+l+" 天 "+m+" 小时 "+n+" 分钟 "+M+" 秒")}setInterval(siteTime,1e3)</script><br><span id="icp"><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/medias/icp.png" style="vertical-align:text-bottom"> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=52022102000065" target="_blank">贵公网安备 52022102000065号</a> </span>&nbsp<a href="https://beian.miit.gov.cn" style="color:#fff" target="_blank">黔ICP备2022004018号-1</a></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/GreetingPine" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:75322363@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://message/?uin=75322363&Site=&Menu=yes" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 75322363" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,r,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(r),n=document.getElementById(s);t.addEventListener("input",function(){var o='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var n,e,r,s=!0,i=t.title.trim().toLowerCase(),l=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=0===(a=t.url).indexOf("/")?t.url:"/"+a,c=-1,u=-1;""!==i&&""!==l&&h.forEach(function(t,e){n=i.indexOf(t),c=l.indexOf(t),n<0&&c<0?s=!1:(c<0&&(c=0),0===e&&(u=c))}),s&&(o+="<li><a href='"+a+"' class='search-result-title'>"+i+"</a>",a=t.content.trim().replace(/<[^>]+>/g,""),0<=u&&(t=u+80,(t=0===(e=(e=u-20)<0?0:e)?100:t)>a.length&&(t=a.length),r=a.substr(e,t),h.forEach(function(t){var e=new RegExp(t,"gi");r=r.replace(e,'<em class="search-keyword">'+t+"</em>")}),o+='<p class="search-result">'+r+"...</p>"),o+="</li>")}),o+="</ul>",n.innerHTML=o)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><div class="sum-moon-box"><a class="btn-floating btn-large waves-effect waves-light" onclick="switchNightMode()" title="切换主题"><i id="sum-moon-icon" class="fas fa-sun" style="width:48px;height:48px;font-size:28px"></i></a></div><script>function switchNightMode(){$('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($("body")),setTimeout(function(){$("body").hasClass("DarkMode")?($("body").removeClass("DarkMode"),localStorage.setItem("isDark","0"),$("#sum-moon-icon").removeClass("fa-sun").addClass("fa-moon")):($("body").addClass("DarkMode"),localStorage.setItem("isDark","1"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")),setTimeout(function(){$(".Cuteen_DarkSky").fadeOut(1e3,function(){$(this).remove()})},2e3)})}</script><div class="stars-con"><div id="stars"></div><div id="stars2"></div><div id="stars3"></div></div><script>"1"===localStorage.getItem("isDark")?(document.body.classList.add("DarkMode"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")):(document.body.classList.remove("DarkMode"),$("#sum-moon-icon").removeleClass("fa-sun").addClass("fa-moon"))</script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/materialize/materialize.min.js"></script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/aos/aos.js"></script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0],e=(t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e)}()</script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/others/clicklove.js" async></script><script async src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/others/busuanzi.pure.mini.js"></script><script src="//code.tidio.co/4g7zqqrzhd7jtjyj9rptplmtxgmddbdr.js"></script><script>$(document).ready(function(){setInterval(function(){var t=$("#tidio-chat iframe");"block"==t.css("display")&&977<$(window).width()?(document.getElementById("tidio-chat-iframe").style.bottom=0<("none"==$("div#backTop.top-scroll").css("display")&&977<$(window).width())?"-40px":0<($("div.toc-title").length&&977<$(window).width())?"85px":"20px",document.getElementById("tidio-chat-iframe").style.right="-15px",document.getElementById("tidio-chat-iframe").style.height=520<=parseInt(t.css("height"))?"520px":t.css("height"),document.getElementById("tidio-chat-iframe").style.zIndex="997"):"block"==t.css("display")&&601<$(window).width()&&$(window).width()<992?(document.getElementById("tidio-chat-iframe").style.bottom=0<("none"==$("div#backTop.top-scroll").css("display")&&601<$(window).width()<992)?"-40px":"20px",document.getElementById("tidio-chat-iframe").style.right="-15px",document.getElementById("tidio-chat-iframe").style.zIndex="997"):"block"==t.css("display")&&$(window).width()<601&&parseInt(t.css("height"))<230&&(document.getElementById("tidio-chat-iframe").style.bottom=0<("none"==$("div#backTop.top-scroll").css("display")&&$(window).width()<601)?"-10px":"45px",document.getElementById("tidio-chat-iframe").style.zIndex="997");"block"==t.css("display")&&$(window).width()<601&&230<=parseInt(t.css("height"))&&(document.getElementById("tidio-chat-iframe").style.zIndex="998")},50)})</script><script type="text/javascript" color="0,0,255" pointcolor="0,0,255" opacity="0.7" zindex="-1" count="99" src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/background/canvas-nest.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/background/ribbon-dynamic.js" async></script><script src="https://cdn.jsdelivr.net/gh/GreetingPine/GreetingPine.github.io/libs/instantpage/instantpage.js" type="module"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/haruto.model.json"},display:{position:"left",width:85,height:170},mobile:{show:!0},log:!1})</script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=(n.imageLazyLoadSetting.preloadRatio,Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight+240||document.documentElement.clientHeight+240)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}i(),n.addEventListener("scroll",function(){var t,e;t=i,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>